{"config":{"lang":["ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u0412\u0412\u0415\u0414\u0415\u041d\u0418\u0415","text":"<pre><code>SSSSSSS    CCCCCC   RRRRRR    IIIII   PPPPPP   TTTTTTT  SSSSSSS\nS         C         R     R     I     P     P     T     S\n SSSSS    C         RRRRRR      I     PPPPPP      T      SSSSS\n      S   C         R   R       I     P           T           S\nSSSSSSS    CCCCCC   R    R    IIIII   P           T     SSSSSSS\n</code></pre> <p>\ud83d\ude80 Scripts - \u043f\u0430\u043a\u0435\u0442 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0434\u043b\u044f DevOps-\u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432.</p> <p>\u27a1\ufe0f \u0412\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u043b\u0435\u0436\u0430\u0442 \u0432 <code>config.env</code> \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u043f\u0430\u043f\u043a\u0438 <code>scripts</code>.</p> <p>\u27a1\ufe0f \u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043a\u0440\u0438\u043f\u0442 \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u043c: <pre><code>chmod +x &lt;script_name&gt;.sh\n</code></pre></p> <p>\u27a1\ufe0f URL Format \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 telegram:</p> <p><code>telegram://token@telegram?chats=channel-1[,chat-id-1,...]</code></p> <p>\u27a1\ufe0f \u042d\u043c\u043e\u0434\u0437\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0434\u043b\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 telegram:</p> <p>\u2139\ufe0f \u26a0\ufe0f \u274c \u2705 \u2708\ufe0f \ud83e\udd2c \ud83d\udd14 \ud83d\ude80</p>"},{"location":"#telegram","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f telegram:","text":"<p>1\ufe0f\u20e3.  \u0423\u0437\u043d\u0430\u0442\u044c ID \u043a\u0430\u043d\u0430\u043b\u0430 \u27a1\ufe0f</p> <p>https://api.telegram.org/bot{TOKEN}/getUpdates</p> <p>2\ufe0f\u20e3.  \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f: <pre><code>curl -s -X POST \"https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage\" -d \"chat_id=$CHAT_ID&amp;text=$MESSAGE\"\ncurl -X POST \"https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage\" -d \"chat_id=$CHAT_ID&amp;text=\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\"\n</code></pre></p> <p>3\ufe0f\u20e3.  \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043b\u043e\u0433\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438: <pre><code>$ tail -f ~/scripts/&lt;script_name&gt;.log\n</code></pre></p> <p>5\ufe0f\u20e3.  Shoutrrr - \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u043e TELEGRAM_TOKEN telegram-\u043a\u0430\u043d\u0430\u043b\u043e\u0432: https://containrrr.dev/shoutrrr/v0.8/services/telegram/</p> <pre><code>$ docker run --rm -it containrrr/shoutrrr generate telegram\n</code></pre>"},{"location":"#_2","title":"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0443 \u0438 \u0437\u0430\u043f\u0443\u0441\u043a","text":"<p>\u0412\u043d\u0430\u0447\u0430\u043b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432 \u043f\u0430\u043f\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0444\u0430\u0439\u043b config.env \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f (\u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f):</p> <pre><code># \u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\nWORKDIR=/path/to/project\nLOGDIR=/path/to/project/logs\nPROJECT_NAME=project_name\n\n# TELEGRAM\nTELEGRAM_TOKEN=\"&lt;telegram-roken&gt;\"\nTELEGRAM_CHAT_ID=\"&lt;telegram_chat_id&gt;\"\n\n# \u0414\u043b\u044f \u0441\u043a\u0440\u0438\u043f\u0442\u0430 redeploy\nDOCKER_REGISTRY=\"&lt;docker-registry_url&gt;\"\n\n# \u0414\u043b\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432\nLOG_FILE=\"/path/to/log.log\"\nCONTAINER_NAME=\"container_name\"\nTIMESTAMP_HOST_FILE=\"/path/to/project_timestamp_file.txt\"\nTIME_DELTA=&lt;time_delta&gt;\n\n# \u0414\u043b\u044f proxy-scheduler\nDATE_FILE=\"/path/to/initial_date.txt\"\nMESSAGE=\"&lt;message&gt;\"\nPAST_DATE=\"&lt;past_date&gt;\"\n</code></pre>"},{"location":"#_3","title":"\u0417\u0430\u043f\u0443\u0441\u043a \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438","text":"<p>\u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f crontab \u0438 \u0443\u0442\u0438\u043b\u0438\u0442\u0430 Linux at.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0443\u0442\u0438\u043b\u0438\u0442\u044b at: <pre><code>$ echo \"/path/to/scripts/script_name.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/script_log.log 2&gt;&amp;1\" | at &lt;h&gt;:&lt;m&gt; &lt;YY&gt;-&lt;m&gt;-&lt;d&gt;\n</code></pre></p> <p>\u0414\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u0447 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>atq</code>: <pre><code>$ atq\n</code></pre></p> <p>\u0427\u0442\u043e\u0431\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>atrm</code> \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043d\u043e\u043c\u0435\u0440\u0430 \u0437\u0430\u0434\u0430\u0447\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e <code>atq</code>: <pre><code>$ atrm 1\n</code></pre></p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e crontab:</p> <p>\u0412\u043e\u0439\u0442\u0438 \u0432 crontab: <pre><code>$ crontab - e\n</code></pre></p> <p>\u0417\u0430\u043f\u0443\u0441\u043a \u0441\u043a\u0440\u0438\u043f\u0442\u0430: <pre><code>30 2 * * * /path/to/your/script.sh || /path/to/send_telegram_message.sh \"Cron job failed!\"\n</code></pre></p>"},{"location":"scripts/","title":"SCRIPTS \ud83e\ude84","text":""},{"location":"scripts/#1","title":"1. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u0434\u0435\u043f\u043b\u043e\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432","text":"<p>Script to Deployment Projects (redeploy.sh) -&gt;</p> <ul> <li>\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u0432 \u0440\u0430\u0431\u043e\u0447\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0435\u043a\u0442\u0430, </li> <li>\u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0441\u0442\u0430\u0440\u044b\u0439 \u043e\u0431\u0440\u0430\u0437,</li> <li>\u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u043e\u0431\u0440\u0430\u0437, </li> <li>\u043f\u0443\u0431\u043b\u0438\u043a\u0443\u0435\u0442 \u0435\u0433\u043e \u0432 docker-registry \u0438 </li> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 telegram</li> </ul> <p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430:</p> <ul> <li>\u0422\u043e\u043a\u0435\u043d \u0438 ID \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u043a\u0430\u043d\u0430\u043b\u0430 - <code>TELEGRAM_TOKEN</code>, <code>TELEGRAM_CHAT_ID</code></li> <li>\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f, \u0433\u0434\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u0440\u0430\u0437 - <code>WORKDIR=\"/path/to/workdir/\"</code></li> <li>\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f docker-registry - <code>DOCKER_REGISTRY</code></li> <li>\u0418\u043c\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 - <code>PROJECT_NAME</code></li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 - <code>CONFIG_FILE</code></li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0434\u0435\u043f\u043b\u043e\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430: <pre><code>echo \"/path/to/scripts/redeploy.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/cartman_log.log 2&gt;&amp;1\" | at 18:26 2025-03-24\n</code></pre></p>"},{"location":"scripts/#2-telegram","title":"2. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 telegram","text":"<p>Script to check telegram messages (check_telegram_messages.sh) -&gt;</p> <ul> <li>\u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0432\u0440\u0435\u043c\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f,</li> <li>\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0447\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u043d\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435 <code>TIME_DELTA</code>,</li> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u0445 \u0432 telegram</li> </ul> <p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430:</p> <ul> <li>\u0422\u043e\u043a\u0435\u043d \u0438 ID \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u043a\u0430\u043d\u0430\u043b\u0430 - <code>TELEGRAM_TOKEN</code>, <code>TELEGRAM_CHAT_ID</code></li> <li>\u0418\u043c\u044f \u0438 \u043f\u0443\u0442\u044c \u0434\u043e \u0444\u0430\u0439\u043b\u0430, \u0433\u0434\u0435 \u0431\u0443\u0434\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0431 \u0430\u0443\u0434\u0438\u0442\u0435 - <code>TIMESTAMP_HOST_FILE</code></li> <li>\u0412\u0440\u0435\u043c\u044f, \u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0438\u0449\u0435\u0442\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0431 \u0430\u0443\u0434\u0438\u0442\u0435 - <code>TIME_DELTA</code></li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 - <code>CONFIG_FILE</code></li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u0432 crontab: <pre><code>0 9 * * * /path/to/scripts/check_telegram_messages.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/check_telegram_messages.log 2&gt;&amp;1\n</code></pre></p>"},{"location":"scripts/#3-docker-crontab","title":"3. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430 docker-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432 crontab","text":"<p>Script for timed restart of docker container in crone (restart_docker_container.sh) -&gt;</p> <ul> <li>\u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 docker-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 <code>CONTAINER_NAME</code> \u0438</li> <li>\u043f\u0438\u0448\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u043b\u043e\u0433\u0438 <code>LOG_FILE</code></li> </ul> <p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430:</p> <ul> <li>\u0422\u043e\u043a\u0435\u043d \u0438 ID \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u043a\u0430\u043d\u0430\u043b\u0430 - <code>TELEGRAM_TOKEN</code>, <code>TELEGRAM_CHAT_ID</code></li> <li>\u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 - <code>CONTAINER_NAME</code></li> <li>\u041f\u0443\u0442\u044c \u0434\u043e LOG_FILE - <code>LOG_FILE=\"/path/to/logs/\"</code></li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 - <code>CONFIG_FILE</code></li> </ul> <p>\u0427\u0430\u0441\u0442\u043d\u044b\u0439 \u0441\u043b\u0443\u0447\u0430\u0439 - \u0441\u043a\u0440\u0438\u043f\u0442 Script for timed restart of Cartman worker in crone (restart_cartman_worker.sh)  \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 docker-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 worker \u043f\u0440\u043e\u0435\u043a\u0442\u0430 Cartman.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 Cartman \u0432 crontab: <pre><code>0 6 * * * /path/to/scripts/restart_cartman_worker.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/restart_cartman_worker.log 2&gt;&amp;1\n</code></pre></p>"},{"location":"scripts/#4-telegram-","title":"4. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043b\u043e\u0433\u043e\u0432 \u0432 telegram-\u043a\u0430\u043d\u0430\u043b","text":"<p>Script for sending logs to telegram (telegram_send_logs.sh) -&gt;</p> <ul> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0438\u0437 LOG_FILE \u0432 telegram</li> </ul> <p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430:</p> <ul> <li>\u0422\u043e\u043a\u0435\u043d \u0438 ID \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u043a\u0430\u043d\u0430\u043b\u0430 - <code>TELEGRAM_TOKEN</code>, <code>TELEGRAM_CHAT_ID</code></li> <li>\u041f\u0443\u0442\u044c \u0434\u043e LOG_FILE - <code>LOG_FILE=\"/path/to/logs/\"</code></li> <li>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 - <code>CONTAINER_NAME</code></li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 - <code>CONFIG_FILE</code></li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u0432 crontab: <pre><code>0 6 * * * /path/to/scripts/telegram_send_logs.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/telegram_send_logs.log 2&gt;&amp;1\n</code></pre></p>"},{"location":"scripts/#5-profiles-docker-worker-cartman","title":"5. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f /profiles/ \u0438\u0437 docker-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 worker \u043f\u0440\u043e\u0435\u043a\u0442\u0430 CARTMAN","text":"<p>Script to remove /profiles/ from cartman-worker (remove_cartman_worker_profiles.sh) -&gt;</p> <ul> <li>\u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432 crontab \u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 /profiles/* REPEAT_COUNT \u0440\u0430\u0437\u0430 \u0438\u0437 docker-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 <code>worker</code></li> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 telegram</li> </ul> <p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430:</p> <ul> <li>\u0422\u043e\u043a\u0435\u043d \u0438 ID \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u043a\u0430\u043d\u0430\u043b\u0430 - <code>TELEGRAM_TOKEN</code>, <code>TELEGRAM_CHAT_ID</code></li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u0432 crontab: <pre><code>0 * * * * /path/to/scripts/remove_cartman_worker_profiles.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/remove_cartman_worker_profiles.log 2&gt;&amp;1\n</code></pre></p>"},{"location":"scripts/#6-","title":"6. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f \u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043e\u043f\u043b\u0430\u0442\u044b \u043f\u0440\u043e\u043a\u0441\u0438-\u0430\u0434\u0440\u0435\u0441\u043e\u0432","text":"<p>Script proxy scheduler -&gt;</p> <ul> <li>\u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0443\u044e \u0438 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u044b,</li> <li>\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u043f\u0440\u043e\u0448\u043b\u043e \u043b\u0438 30 \u0434\u043d\u0435\u0439,</li> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 telegram-\u043a\u0430\u043d\u0430\u043b</li> </ul> <p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430:</p> <ul> <li>\u0422\u043e\u043a\u0435\u043d \u0438 ID \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u043a\u0430\u043d\u0430\u043b\u0430 - <code>TELEGRAM_TOKEN</code>, <code>TELEGRAM_CHAT_ID</code></li> <li> <ul> <li>\u041f\u0443\u0442\u044c \u0434\u043e \u0444\u0430\u0439\u043b\u0430 \u0441 \u0434\u0430\u0442\u043e\u0439 DATE_FILE - <code>DATE_FILE=\"/path/to/logs/\"</code></li> </ul> </li> <li>\u041f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u0430\u0442\u0430 - <code>PAST_DATE</code></li> <li>\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 telegram - <code>MESSAGE</code></li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 - <code>CONFIG_FILE</code></li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u0432 crontab: <pre><code>0 10 * * * /path/to/scripts/proxy scheduler.sh /path/to/scripts/config.env &gt;&gt; /path/to/scripts/proxy scheduler.log 2&gt;&amp;1\n</code></pre></p>"},{"location":"scripts_blocks/","title":"\ud83e\udde9 SCRIPTS BLOCKS","text":"<p>1\ufe0f\u20e3.  \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f:</p> <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\nif [ \"$#\" -ne 1 ]; then\n    echo \"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435: $0 \u043f\u0443\u0442\u044c_\u043a_\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c\u0443_\u0444\u0430\u0439\u043b\u0443\" &gt;&amp;2\n    exit 1\nfi\n\nCONFIG_FILE=\"$1\"\n\n# \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\nif [ -f \"$CONFIG_FILE\" ]; then\n    . \"$CONFIG_FILE\"\nelse\n    echo \"\u0424\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 $CONFIG_FILE \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.\" &gt;&amp;2\n    exit 1\nfi\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\n: \"${VARIABLE_ONE:?\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f VARIABLE_ONE \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u0430}\"\n: \"${VARIABLE_TWO:?\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f VARIABLE_TWO \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u0430}\"\n</code></pre> <p>2\ufe0f\u20e3. \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 telegram:</p> <pre><code># \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c Telegram\nif [ -z \"$TELEGRAM_TOKEN\" ] || [ -z \"$TELEGRAM_CHAT_ID\" ]; then\n    echo \"\u041e\u0448\u0438\u0431\u043a\u0430: \u041d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f TELEGRAM_TOKEN \u0438\u043b\u0438 TELEGRAM_CHAT_ID.\" &gt;&amp;2\n    exit 1\nfi\n\n# \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 Telegram\nsend_telegram_message() {\n    local message=\"$1\"\n    local url=\"https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage\"\n    curl -s -X POST \"$url\" -d \"chat_id=$TELEGRAM_CHAT_ID&amp;text=$message\"\n}\n\n# \u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439\nmessage_content=\"\"\n\nsend_telegram_warning_message \"$message_content\"\n</code></pre> <p>3\ufe0f\u20e3.  \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 telegram-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0441 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c:</p> <pre><code># \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 Telegram\nsend_telegram_message() {\n    local message=\"$1\"\n    local url=\"https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage\"\n    curl -s -X POST \"$url\" \\\n            --data-urlencode \"chat_id=$TELEGRAM_CHAT_ID\" \\\n            --data-urlencode \"text=$message\" \\\n            --data-urlencode \"parse_mode=MarkdownV2\"\n}\n\n# \u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439\nmessage_content=\"\"\n\n# \u042d\u043a\u0440\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0434\u043b\u044f MarkdownV2\nmessage_content=$(echo -e \"$message_content\" | sed 's/[_*`.,-]/\\\\&amp;/g')\n\n# \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 Telegram\nsend_telegram_message \"$message_content\"\n</code></pre> <p>4\ufe0f\u20e3.  \u042d\u043a\u0440\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0434\u043b\u044f MarkdownV2:</p> <p>message_content=$(echo -e \"$message_content\" | sed 's/[_*`.,-]/\\&amp;/g')</p> <p>5\ufe0f\u20e3.  \u0424\u043e\u0440\u043c\u0430\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u0438:</p> <p>\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \"YYYY-MM-DD h:m:s\"</p> <p><code>$(date '+%Y-%m-%d %H:%M:%S')</code></p> <p>\u0438\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \"YYYY-MM-DD\"</p> <p><code>$(date '+%Y-%m-%d')</code></p>"}]}