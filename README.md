# scripts

–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –ª–µ–∂–∞—Ç –≤ `config.env` –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ `scripts`.

–°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
chmod +x <script_name>.sh
```

–≠–º–æ–¥–∑–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ telegram:
‚ÑπÔ∏è ‚ö†Ô∏è ‚ùå ‚úÖ ‚úàÔ∏è ü§¨ üîî 


## 1. **Script to Deployment Projects**

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–æ–≤** ->
- –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞, 
- —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–∑,
- —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑, 
- –ø—É–±–ª–∏–∫—É–µ—Ç –µ–≥–æ –≤ docker-registry –∏ 
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ telegram-–∫–∞–Ω–∞–ª

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞**:
- _–¢–æ–∫–µ–Ω –∏ ID —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–∞_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≥–¥–µ –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –æ–±—Ä–∞–∑_ - `WORKDIR="/path/to/workdir/"`
- _–ò–º—è –ø—Ä–æ–µ–∫—Ç–∞_ - `PROJECT_NAME="<project_name>"`
- _–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ_ - `CONFIG_FILE`

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–∞:
```bash
echo "/path/to/scripts/redeploy.sh /path/to/scripts/config.env >> /path/to/scripts/cartman_log.log 2>&1" | at 18:26 2025-03-24
```


## 2. **Script to check Cartman Project audit**

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É–¥–∏—Ç–∞** ->
- –ø–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º—è —Ñ–∞–π–ª–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞—É–¥–∏—Ç–∞,
- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–∞–π–ª –±—ã–ª —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –Ω–µ –ø–æ–∑–¥–Ω–µ–µ `TIME_DELTA`,
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ telegram-–∫–∞–Ω–∞–ª

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞**:
- _–¢–æ–∫–µ–Ω –∏ ID —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–∞_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _–ò–º—è –∏ –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞, –≥–¥–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –∞—É–¥–∏—Ç–µ_ - `TIMESTAMP_HOST_FILE`
- _–í—Ä–µ–º—è, –∑–∞ –∫–æ—Ç–æ—Ä–æ–µ –∏—â–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∞—É–¥–∏—Ç–µ_ - `TIME_DELTA`
- _–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ_ - `CONFIG_FILE`

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –≤ crontab:
```bash
0 9 * * * /path/to/scripts/check_telegram_messages.sh /path/to/scripts/config.env >> /path/to/scripts/check_telegram_messages.log 2>&1
```


## 3. **Script for timed restart of docker container in crone**

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ crontab** ->
- –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `CONTAINER_NAME` –∏
- –ø–∏—à–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∏ `LOG_FILE`

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞**:
- _–ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞_ - `CONTAINER_NAME="<container_name>"`
- _–ü—É—Ç—å –¥–æ LOG_FILE_ - `LOG_FILE="/path/to/logs/"`

–ß–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π - —Å–∫—Ä–∏–ø—Ç **Script for timed restart of Cartman worker in crone** - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç
docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä worker –ø—Ä–æ–µ–∫—Ç–∞ **Cartman**.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ **Cartman** –≤ crontab:
```bash
0 6 * * * /path/to/scripts/restart_cartman_worker.sh /path/to/scripts/config.env >> /path/to/scripts/restart_cartman_worker.log 2>&1
```


## 4. **Script for sending logs to telegram**

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–æ–≤ –≤ telegram-–∫–∞–Ω–∞–ª**

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞**:
- _–¢–æ–∫–µ–Ω –∏ ID —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–∞_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _–ü—É—Ç—å –¥–æ LOG_FILE_ - `LOG_FILE="/path/to/logs/"`
- _–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ_ - `CONFIG_FILE`

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –≤ crontab:
```bash
0 6 * * * /path/to/scripts/telegram_send_logs.sh /path/to/scripts/config.env >> /path/to/scripts/telegram_send_logs.log 2>&1
```
