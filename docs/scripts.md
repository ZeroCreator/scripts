# SCRIPTS ðŸª„

## 1. **Script to Deployment Projects** (_redeploy.sh_)

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²** ->
- Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ñ‚ Ð² Ñ€Ð°Ð±Ð¾Ñ‡ÑƒÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°, 
- ÑƒÐ´Ð°Ð»ÑÐµÑ‚ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð·,
- ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð·, 
- Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ ÐµÐ³Ð¾ Ð² docker-registry Ð¸ 
- Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² telegram

**ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°**:
- _Ð¢Ð¾ÐºÐµÐ½ Ð¸ ID Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ð°_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ, Ð³Ð´Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑÐ¾Ð±Ð¸Ñ€Ð°Ñ‚ÑŒÑÑ Ð¾Ð±Ñ€Ð°Ð·_ - `WORKDIR="/path/to/workdir/"`
- _Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ docker-registry_ - `DOCKER_REGISTRY`
- _Ð˜Ð¼Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°_ - `PROJECT_NAME`
- _ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð», Ð³Ð´Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ_ - `CONFIG_FILE`

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÐº Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:
```bash
echo "/path/to/scripts/redeploy.sh /path/to/scripts/config.env >> /path/to/scripts/cartman_log.log 2>&1" | at 18:26 2025-03-24
```

---
## 2. **Script to check Cartman Project audit** (_check_telegram_messages.sh_)

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð±Ñ‹Ð»Ð¾ Ð»Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð² telegram** ->
- Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð²Ñ€ÐµÐ¼Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ,
- Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ñ‡Ñ‚Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð½Ðµ Ð¿Ð¾Ð·Ð´Ð½ÐµÐµ `TIME_DELTA`,
- Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ñ… Ð² telegram

**ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°**:
- _Ð¢Ð¾ÐºÐµÐ½ Ð¸ ID Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ð°_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _Ð˜Ð¼Ñ Ð¸ Ð¿ÑƒÑ‚ÑŒ Ð´Ð¾ Ñ„Ð°Ð¹Ð»Ð°, Ð³Ð´Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒÑÑ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð°ÑƒÐ´Ð¸Ñ‚Ðµ_ - `TIMESTAMP_HOST_FILE`
- _Ð’Ñ€ÐµÐ¼Ñ, Ð·Ð° ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð¸Ñ‰ÐµÑ‚ÑÑ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð± Ð°ÑƒÐ´Ð¸Ñ‚Ðµ_ - `TIME_DELTA`
- _ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð», Ð³Ð´Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ_ - `CONFIG_FILE`

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð² **crontab**:
```bash
0 9 * * * /path/to/scripts/check_telegram_messages.sh /path/to/scripts/config.env >> /path/to/scripts/check_telegram_messages.log 2>&1
```

---
## 3. **Script for timed restart of docker container in crone** (_restart_docker_container.sh_)

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ° docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð° Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð² crontab** ->
- Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ `CONTAINER_NAME` Ð¸
- Ð¿Ð¸ÑˆÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² Ð»Ð¾Ð³Ð¸ `LOG_FILE`

**ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°**:
- _Ð¢Ð¾ÐºÐµÐ½ Ð¸ ID Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ð°_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _Ð˜Ð¼Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°_ - `CONTAINER_NAME`
- _ÐŸÑƒÑ‚ÑŒ Ð´Ð¾ LOG_FILE_ - `LOG_FILE="/path/to/logs/"`
- _ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð», Ð³Ð´Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ_ - `CONFIG_FILE`

Ð§Ð°ÑÑ‚Ð½Ñ‹Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹ - ÑÐºÑ€Ð¸Ð¿Ñ‚ **Script for timed restart of Cartman worker in crone** (_restart_cartman_worker.sh_) 
Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ **worker** Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° **Cartman**.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð´Ð»Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° **Cartman** Ð² **crontab**:
```bash
0 6 * * * /path/to/scripts/restart_cartman_worker.sh /path/to/scripts/config.env >> /path/to/scripts/restart_cartman_worker.log 2>&1
```

---
## 4. **Script for sending logs to telegram** (_telegram_send_logs.sh_)

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð»Ð¾Ð³Ð¾Ð² Ð² telegram-ÐºÐ°Ð½Ð°Ð»**
- Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð¸Ð· LOG_FILE Ð² telegram

**ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°**:
- _Ð¢Ð¾ÐºÐµÐ½ Ð¸ ID Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ð°_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- _ÐŸÑƒÑ‚ÑŒ Ð´Ð¾ LOG_FILE_ - `LOG_FILE="/path/to/logs/"`
- _ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°_ - `CONTAINER_NAME`
- _ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð», Ð³Ð´Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ_ - `CONFIG_FILE`

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð² **crontab**:
```bash
0 6 * * * /path/to/scripts/telegram_send_logs.sh /path/to/scripts/config.env >> /path/to/scripts/telegram_send_logs.log 2>&1
```

---
## 5. **Script to remove /profiles/ from cartman-worker** (_remove_cartman_worker_profiles.sh_)
**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ /profiles/ Ð¸Ð· docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð° worker Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° _CARTMAN_**
- Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð² crontab ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ /profiles/* 4 REPEAT_COUNT Ñ€Ð°Ð·Ð° Ð¸Ð· docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ worker
- Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² telegram

**ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°**:
- _Ð¢Ð¾ÐºÐµÐ½ Ð¸ ID Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ð°_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð² **crontab**:
```bash
0 * * * * /path/to/scripts/remove_cartman_worker_profiles.sh /path/to/scripts/config.env >> /path/to/scripts/remove_cartman_worker_profiles.log 2>&1
```

---
## 6. **Script _proxy scheduler_**

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ð¿Ñ€Ð¾ÐºÑÐ¸-Ð°Ð´Ñ€ÐµÑÐ¾Ð²**
- Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¿ÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ð´Ð°Ñ‚Ñ‹,
- Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ð¿Ñ€Ð¾ÑˆÐ»Ð¾ Ð»Ð¸ 30 Ð´Ð½ÐµÐ¹,
- Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² telegram-ÐºÐ°Ð½Ð°Ð»

**ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°**:
- _Ð¢Ð¾ÐºÐµÐ½ Ð¸ ID Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼-ÐºÐ°Ð½Ð°Ð»Ð°_ - `TELEGRAM_TOKEN`, `TELEGRAM_CHAT_ID`
- - _ÐŸÑƒÑ‚ÑŒ Ð´Ð¾ Ñ„Ð°Ð¹Ð»Ð° Ñ Ð´Ð°Ñ‚Ð¾Ð¹ DATE_FILE_ - `DATE_FILE="/path/to/logs/"`
- _ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð°Ñ‚Ð°_ - `PAST_DATE`
- _Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð² telegram_ - `MESSAGE`
- _ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð», Ð³Ð´Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ_ - `CONFIG_FILE`

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð² **crontab**:
```bash
0 10 * * * /path/to/scripts/proxy scheduler.sh /path/to/scripts/config.env >> /path/to/scripts/proxy scheduler.log 2>&1
```

---
